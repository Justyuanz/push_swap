# === Configuration ===
NAME = c_vec.a
CC = cc
CFLAGS = -Wall -Wextra -Werror
DFLAGS = -MMD -MP -I include

SRCDIR = src
OBJDIR = obj

# === Source Files ===
SRCS = $(addprefix $(SRCDIR)/,\
	ft_intmemcpy.c \
	ft_intmemmove.c \
	vec_free.c \
	vec_from.c \
	vec_new.c \
	vec_copy.c \
	vec_resize.c \
	vec_push.c \
	vec_pop.c \
	vec_get.c \
	vec_insert.c \
	vec_remove.c \
	vec_append.c \
	vec_prepend.c \
)
OBJS = $(SRCS:$(SRCDIR)/%.c=$(OBJDIR)/%.o)
# Dependency files generated by -MMD -MP
DEPS = $(OBJS:.o=.d)

# === Default Target ===
all: $(NAME)

# === Build Executable ===
$(NAME): $(OBJS)
		ar rcs $(NAME) $(OBJS)

# === Compile Rule for .c to .o ===
#silently make the directory that contains that output file
$(OBJDIR)/%.o: $(SRCDIR)/%.c
			mkdir -p $(@D)
			$(CC) $(CFLAGS) $(DFLAGS) -c $< -o $@

# === Clean rule ===
clean:
		rm -rf $(OBJDIR)

fclean: clean
		rm -rf $(NAME)

re: fclean all


.PHONY: all clean fclean re
.SECONDARY: $(OBJS)
-include $(DEPS)